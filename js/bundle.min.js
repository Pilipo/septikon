!function e(t,i,n){function r(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return r(i||e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=e("./prefabs/client"),o=n(r),a=e("./states/boot"),s=n(a),l=e("./states/game"),u=n(l),c=e("./states/setup"),h=n(c),f=e("./states/preloader"),d=n(f),p=e("./states/gameover"),g=n(p),y=new Phaser.Game(window.innerWidth,window.innerHeight,Phaser.AUTO,"phaser-test-game");y.client=new o.default,y.state.add("boot",new s.default),y.state.add("game",new u.default),y.state.add("setup",new h.default),y.state.add("preloader",new d.default),y.state.add("gameover",new g.default),y.state.start("boot")},{"./prefabs/client":2,"./states/boot":11,"./states/game":12,"./states/gameover":13,"./states/preloader":14,"./states/setup":15}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.socket=io.connect()}return r(e,[{key:"askNewPlayer",value:function(){this.socket.emit("newPlayer")}}]),e}();i.default=o},{}],3:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,o,a,s){n(this,t);var l=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,o,"clone",a));return l.team=s,l.anchor.setTo(.5,.65),l.game.physics.arcade.enableBody(l),l.body.collideWorldBounds=!0,l.ding=l.game.add.audio("ding"),l.width=27,l.scale.y=Math.abs(l.scale.x),l.angle=90,l.animations.add("idling",null,5,!0),l.animations.play("idling"),l.currentTileCoordinates=l.game.septikon.pixelsToTile(l.x,l.y),l.game.septikon.tileArray[l.currentTileCoordinates.x][l.currentTileCoordinates.y].tileOccupied=!0,l}return o(t,e),a(t,[{key:"remove",value:function(){this.game.septikon.tileArray[this.currentTileCoordinates.x][this.currentTileCoordinates.y].tileOccupied=!1,this.destroy()}},{key:"highlightOn",value:function(){this.tint=16733440,this.game.septikon.tileArray[this.currentTileCoordinates.x][this.currentTileCoordinates.y].alpha=1}},{key:"highlightOff",value:function(){this.tint=16777215,this.game.septikon.tileArray[this.currentTileCoordinates.x][this.currentTileCoordinates.y].alpha=0}},{key:"getLegalMoves",value:function(){this.currentTileCoordinates=this.game.septikon.pixelsToTile(this.x,this.y);var e=this.game.septikon.getLegalMoves(this.game.global.lastDiceRoll,this.currentTileCoordinates),t=[];for(var i in e)t.push(this.game.septikon.tileArray[e[i].x][e[i].y]);return t}},{key:"move",value:function(e){for(var t in this.legalTilesArray)this.legalTilesArray[t].alpha=0,delete this.legalTilesArray[t].legalFor;var i=this.game.septikon.tileToPixels(e.x,e.y);this.game.septikon.tileArray[this.currentTileCoordinates.x][this.currentTileCoordinates.y].tileOccupied=!1;var n=Math.abs(this.y-i.y+this.x-i.x).toFixed(1);this.currentTileCoordinates=e,this.game.septikon.tileArray[this.currentTileCoordinates.x][this.currentTileCoordinates.y].tileOccupied=!0,this.game.add.tween(this).to({x:i.x,y:i.y},11*n,Phaser.Easing.Cubic.Out,!0).onComplete.add(this.game.septikon.triggerTile,this.game.septikon),delete this.legalTilesArray,delete this.currentLegalMoves}}]),t}(Phaser.Sprite);i.default=s},{}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,o,a){n(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,o,"dice",a));return s.anchor.setTo(.5,.5),s.game.physics.arcade.enableBody(s),s.body.collideWorldBounds=!0,s.inputEnabled=!0,s.events.onInputDown.add(s.clicked,s),s.width=50,s.scale.y=Math.abs(s.scale.x),s.animations.add("idling",null,5,!0),s.animations.play("idling"),s}return o(t,e),a(t,[{key:"clicked",value:function(){if(this.game.septikon.turnState==this.game.septikon.turnStateEnum.START)this.game.global.lastDiceRoll=Math.floor(6*Math.random())+1,this.game.septikon.turnState=this.game.septikon.turnStateEnum.SELECT_CLONE,this.game.septikon.localTeam.offerLegalClones();else if(this.game.septikon.turnState==this.game.septikon.turnStateEnum.SELECT_GUNNER){if(this.game.septikon.pendingAction){console.log("Gunners Confirmed!");var e=this.game.septikon.pendingAction;this.game.septikon[e.props.callback](e.props.args,e.caller)}}else console.log("Dice already rolled for this turn (turn state: "+this.game.septikon.turnState+"). The value is: "+this.game.global.lastDiceRoll)}}]),t}(Phaser.Sprite);i.default=s},{}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function e(){n(this,e)};i.default=r},{}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function e(){n(this,e)};i.default=r},{}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(e){function t(e,i,o,a){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,o,"clone",a))}return o(t,e),t}(Phaser.Sprite);i.default=a},{}],8:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.resourceEnum=Object.freeze({OXYGEN:0,ROCKET:1,METAL:2,ENERGY:3,BIOMASS:4,BIODRONE:5,URANIUM:6}),this.resources={};for(var t in this.resourceEnum)this.resources[this.resourceEnum[t]]=5}return r(e,[{key:"check",value:function(e,t){return this.resources[this.resourceEnum[e]]>t}},{key:"getCount",value:function(e){return this.resources[e]}},{key:"add",value:function(e,t){}},{key:"remove",value:function(e,t){this.resources[e]-=t}}]),e}();i.default=o},{}],9:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../prefabs/master"),s=n(a),l=e("../prefabs/team"),u=n(l),c=function(){function e(t){r(this,e),this.game=t,this.shownTiles=[],this.tileArray=[],this.bgRatio=0,this.worldRatio=0,this.turnStateEnum=Object.freeze({START:0,SELECT_CLONE:1,MOVE_CLONE:2,SELECT_GUNNER:3,SELECT_ACTION_ORDER:4,ACTION:5,END:6}),this.directionEnum=Object.freeze({NORTH:1,EAST:2,SOUTH:4,WEST:8}),this.turnState=0}return o(e,[{key:"pixelsToTile",value:function(e,t){var i=0,n=0;for(var r in this.tileArray)for(var o in this.tileArray[r]){var a=this.tileArray[r][o];e>a.x&&e<a.x+a.width&&(i=parseInt(r)),t>a.y&&t<a.y+a.height&&(n=parseInt(o))}return{x:i,y:n}}},{key:"tileToPixels",value:function(e,t){var i=this.tileArray[e][t];return{x:i.x+i.width/2,y:i.y+i.height/2}}},{key:"tileClicked",value:function(e){this.turnState==this.turnStateEnum.SELECT_GUNNER&&this.localTeam.selectGunner({x:e.tileX,y:e.tileY}),this.turnState==this.turnStateEnum.MOVE_CLONE&&this.localTeam.moveSelectedClone({x:e.tileX,y:e.tileY})&&(this.turnState=this.turnStateEnum.SELECT_GUNNER,this.hideTiles()),this.turnState==this.turnStateEnum.SELECT_CLONE&&this.localTeam.selectCloneForMove({x:e.tileX,y:e.tileY})&&(this.turnState=this.turnStateEnum.MOVE_CLONE),void 0!==e.legalFor&&e.legalFor.move({x:e.tileX,y:e.tileY})}},{key:"triggerTile",value:function(e){var t=this.tileArray[e.currentTileCoordinates.x][e.currentTileCoordinates.y];e.isGunner=!1;var i=t.tileProperties;switch(t.tileType){case"surface":e.isGunner=!0,this.finishTurn();break;case"battle":void 0!==i.resourceCostCount&&(console.log(t.tileName),0!=this.localTeam.offerGunners()||"satellite"!=t.tileName&&"thermite"!=t.tileName&&"shield"!=t.tileName&&"biodrone"!=t.tileName&&"laser"!=t.tileName&&"rocket"!=t.tileName||this.finishTurn(),1==this.localTeam.checkRec(this.localTeam.recEnum[i.resourceCostType.toUpperCase()],i.resourceCostCount)&&(this.localTeam.removeRec(this.localTeam.recEnum[i.resourceCostType.toUpperCase()],i.resourceCostCount),this.localTeam.offerGunners()&&(this.pendingAction={props:i,caller:e})));break;case"armory":this.finishTurn();break;case"production":void 0!==i.resourceCostCount&&this.finishTurn();break;case"lock":this.finishTurn()}}},{key:"fire",value:function(e,t){switch(console.log("Firing the "+e),e){case"laser":case"satellite":case"thermite":case"shield":case"biodrone":case"rocket":default:for(var i in this.localTeam.selectedGunners)this.shootTile(this.localTeam.selectedGunners[i].currentTileCoordinates)}this.localTeam.clearGunners(),this.finishTurn()}},{key:"repair",value:function(e){console.log("repair "+e+" of the things!")}},{key:"espionage",value:function(){console.log("Gimme yer clone!!")}},{key:"takeover",value:function(){console.log("Gimme yer satellite!!")}},{key:"counter",value:function(){console.log("Gimme back my clone!!")}},{key:"killBiodrone",value:function(){console.log("Yer sould better belong to Jesus! Cuz yer ass belongs to me!")}},{key:"finishTurn",value:function(){this.turnState=this.game.septikon.turnStateEnum.START}},{key:"getLegalMoves",value:function(e,t,i){e--;var n=[];for(var r in this.directionEnum){var o=this.getCoordFromDirection(t,r);if(0!=o){var a=this.tileArray[o.x][o.y];if(!0===this.checkWall(this.directionEnum[r],t)&&!1===a.tileDamaged&&(void 0===i||void 0!==i&&JSON.stringify(o)!==JSON.stringify(i)))if(0==e)!1===a.tileOccupied&&n.push(o);else{var s=this.getLegalMoves(e,o,t);for(var l in s)JSON.stringify(s[l])!==JSON.stringify(t)&&n.push(s[l])}}}return n}},{key:"getCoordFromDirection",value:function(e,t){var i={NORTH:{x:0,y:-1},EAST:{x:1,y:0},SOUTH:{x:0,y:1},WEST:{x:-1,y:0}},n={x:parseInt(e.x)+parseInt(i[t].x),y:parseInt(e.y)+parseInt(i[t].y)};return!(n.x<0||n.y<0)&&{x:parseInt(e.x)+parseInt(i[t].x),y:parseInt(e.y)+parseInt(i[t].y)}}},{key:"showTiles",value:function(e){for(var t in e)this.shownTiles.push(e[t]),e[t].alpha=.5}},{key:"hideTiles",value:function(e){if(!e){for(var t in this.shownTiles)this.shownTiles[t].alpha=0;this.shownTiles=[]}}},{key:"shootTile",value:function(e){var t=e.x,i=e.y,n=this.tileArray[t][i];do{t++,n=this.tileArray[t][i]}while("space"==n.tileType||"surface"==n.tileType||1==n.tileDamaged);n.tint=3355443,n.alpha=.8,n.tileDamaged=!0,this.test=this.game.add.sprite(n.x,n.y+n.height/2,"boom"),this.test.angle=270,this.test.anchor.set(.5,.7),this.test.animations.add("boom"),this.test.animations.play("boom",20,!1,!0)}},{key:"checkWall",value:function(e,t){switch(this.wallGrid=this.game.cache.getJSON("wallGrid"),e){case this.directionEnum.NORTH:return 0==parseInt(this.wallGrid.grid[t.x][t.y]&this.directionEnum.NORTH);case this.directionEnum.SOUTH:return 0==parseInt(this.wallGrid.grid[t.x][t.y]&this.directionEnum.SOUTH);case this.directionEnum.EAST:return 0==parseInt(this.wallGrid.grid[t.x][t.y]&this.directionEnum.EAST);case this.directionEnum.WEST:return 0==parseInt(this.wallGrid.grid[t.x][t.y]&this.directionEnum.WEST);default:return!1}}},{key:"setup",value:function(){this.background=this.game.add.sprite(0,0,"background"),this.createTileArray(31,21),this.localTeam=new u.default(this.game),this.gm=new s.default}},{key:"startGame",value:function(){this.background=this.game.add.sprite(0,0,"background"),this.createTileArray(31,21),this.localTeam.refresh()}},{key:"createTileArray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.tileDetail=this.game.cache.getJSON("tileDetail"),this.tileWidth=0,this.tileHeight=0,this.backgroundWidth=this.game.canvas.width,this.backgroundHeight=this.game.canvas.height,this.tileStartCoordinates={x:0,y:0},this.marginTop=40,this.marginBottom=38,this.marginLeft=41,this.marginRight=38,this.padding=4.85,this.tileWidth=25,this.tileHeight=25,this.tileStartCoordinates.x=0+this.marginLeft,this.tileStartCoordinates.y=0+this.marginTop;var n=this.game.add.graphics(0,0);n.beginFill(16767232,1),n.drawRect(100,100,this.tileWidth,this.tileHeight);for(var r=0;r<e;r++)for(var o=0;o<t;o++){var a=this.tileStartCoordinates.x+this.tileWidth*r+(this.padding*r-1),s=this.tileStartCoordinates.y+this.tileHeight*o+(this.padding*o-1);n.generateTexture();var l=this.game.add.sprite(a,s,n.generateTexture());l.alpha=i?.5:0,l.inputEnabled=!0,l.events.onInputDown.add(this.tileClicked,this),void 0===this.tileArray[r]&&(this.tileArray[r]=[]),this.tileArray[r][o]=l}n.destroy();for(var u in this.tileDetail)if(this.tileDetail.hasOwnProperty(u)){var c=this.tileDetail[u];for(var h in c)if(c.hasOwnProperty(h))for(var f=c[h].locations.length,d=0;d<f;d++){var p=c[h].locations[d].split(","),a=p[0],s=p[1];this.tileArray[a][s].tileDamaged=!1,this.tileArray[a][s].tileOccupied=!1,this.tileArray[a][s].tileX=a,this.tileArray[a][s].tileY=s,this.tileArray[a][s].tileType=c[h].type,void 0!==this.tileArray[a][s]?this.tileArray[a][s].tileName=c[h].name:console.log(a+":"+s+" not found!"),void 0!==c[h].properties&&(this.tileArray[a][s].tileProperties=c[h].properties)}}}}]),e}();i.default=c},{"../prefabs/master":5,"../prefabs/team":10}],10:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../prefabs/resources"),s=n(a),l=e("../prefabs/personnel"),u=(n(l),e("../prefabs/ordnance")),c=(n(u),e("../prefabs/clone")),h=n(c),f=function(){function e(t){r(this,e),this.rec=new s.default,this.recEnum=this.rec.resourceEnum,this.game=t,this.personnel=[],this.selectedGunners=[]}return o(e,[{key:"refresh",value:function(){for(var e in this.personnel)this.game.septikon.tileArray[this.personnel[e].currentTileCoordinates.x][this.personnel[e].currentTileCoordinates.y].tileOccupied=!0}},{key:"getRecCount",value:function(e){return this.rec.getCount(e)}},{key:"checkRec",value:function(e,t){return this.getRecCount(e)>=t}},{key:"exchangeRec",value:function(e,t,i,n){}},{key:"addRec",value:function(e,t){return this.rec.add(e,t)}},{key:"removeRec",value:function(e,t){return this.rec.remove(e,t)}},{key:"addClone",value:function(e,t,i){var n=this.game.septikon.tileToPixels(e,t),r=new h.default(this.game,n.x,n.y);r.currentTileCoordinates.x=e,r.currentTileCoordinates.y=t;for(var o in i)r[o]=i[o];this.personnel.push(r),this.game.stage.addChild(r)}},{key:"getClone",value:function(e){for(var t in this.personnel)if(this.personnel[t].currentTileCoordinates.x==e.x&&this.personnel[t].currentTileCoordinates.y==e.y)return this.personnel[t]}},{key:"killClone",value:function(e){var t=this.getClone(e);this.game.stage.removeChild(t);var i=this.personnel.indexOf(t);this.personnel.splice(i,1),t.remove()}},{key:"offerLegalClones",value:function(){for(var e in this.personnel){0!=this.personnel[e].getLegalMoves()&&this.personnel[e].highlightOn()}}},{key:"offerGunners",value:function(){var e=!1;for(var t in this.personnel)this.personnel[t].isGunner&&(e=!0);return e}},{key:"selectGunner",value:function(e){var t=this.getClone(e);if(!t)return!1;if(!t.isGunner)return!1;var i=this.selectedGunners.indexOf(t);i>=0?(t.highlightOff(),this.selectedGunners.splice(i,1)):(t.highlightOn(),this.selectedGunners.push(t))}},{key:"clearGunners",value:function(){for(var e in this.selectedGunners)this.selectedGunners[e].highlightOff();this.selectedGunners=[]}},{key:"selectCloneForMove",value:function(e){var t=this.getClone(e);if(!t)return!1;for(var i in this.personnel)this.personnel[i].highlightOff();return this.legalTiles=t.getLegalMoves(),this.selectedClone=t,this.game.septikon.showTiles(this.legalTiles),!0}},{key:"moveSelectedClone",value:function(e){for(var t in this.legalTiles)if(this.legalTiles[t].tileX==e.x&&this.legalTiles[t].tileY==e.y)return this.selectedClone.move(e),delete this.selectedClone,delete this.legalTiles,!0;return!1}}]),e}();i.default=f},{"../prefabs/clone":3,"../prefabs/ordnance":6,"../prefabs/personnel":7,"../prefabs/resources":8}],11:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../prefabs/septikon"),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.scale.pageAlignHorizontally=!0,this.game.device.desktop||(this.game.scale.parentIsWindow=!0,this.game.scale.scaleMode=Phaser.ScaleManager.RESIZE,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.forceOrientation(!0)),this.initGlobalVariables(),this.game.septikon=new l.default(this.game),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={score:0,lastDiceRoll:0}}}]),t}(Phaser.State);i.default=u},{"../prefabs/septikon":9}],12:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../prefabs/dice"),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"create",value:function(){this.game.septikon.startGame(),this.dice=new l.default(this.game,150,770),this.game.add.existing(this.dice),this.rollText=this.add.text(150,700,"",{font:"40px Arial",fill:"#ffffff",align:"center"}),this.rollText.anchor.set(.5,0)}},{key:"update",value:function(){this.rollText.setText("Dice Roll "+this.game.global.lastDiceRoll)}},{key:"endGame",value:function(){this.game.state.start("gameover")}}]),t}(Phaser.State);i.default=u},{"../prefabs/dice":4}],13:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"create",value:function(){this.background=this.game.add.sprite(0,0,"background"),this.bgRatio=this.background.texture.width/this.background.texture.height,this.worldRatio=this.game.world.width/this.game.world.height,(this.worldRatio-this.bgRatio)/2*this.game.world.width>0?(this.background.width=this.game.world.height/this.background.texture.height*this.background.texture.width,this.background.height=this.game.world.height,this.background.x=(this.game.world.width-this.background.width)/2):(this.background.width=this.game.world.width,this.background.height=this.game.world.width/this.background.texture.width*this.background.texture.height,this.background.y=(this.game.world.height-this.background.height)/2),this.gameoverText=this.add.text(this.game.world.centerX,this.game.world.centerY,"Score = "+this.game.global.score,{font:"42px Arial",fill:"#ffffff",align:"center"}),this.gameoverText.anchor.set(.5),this.input.onDown.add(this.onInputDown,this),this.canContinueToNextState=!1,this.game.time.events.add(.5*Phaser.Timer.SECOND,function(){this.canContinueToNextState=!0},this),this.saveVarsToLocalStorage(),this.resetGlobalVariables()}},{key:"saveVarsToLocalStorage",value:function(){var e=localStorage.maxScore||0;this.game.global.score>e&&(localStorage.maxScore=this.game.global.score)}},{key:"resetGlobalVariables",value:function(){this.game.global.score=0}},{key:"update",value:function(){}},{key:"onInputDown",value:function(){this.canContinueToNextState&&this.game.state.start("menu")}}]),t}(Phaser.State);i.default=s},{}],14:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e.ready=!1,e}return o(t,e),a(t,[{key:"preload",value:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{key:"loadResources",value:function(){this.game.load.json("tileDetail","assets/tileDetail.json"),this.game.load.json("wallGrid","assets/wallGrid.json"),this.game.load.image("background","assets/medium_board.png"),this.game.load.image("dice","assets/text_go.png"),this.game.load.image("text_yes","assets/text_yes.png"),this.game.load.image("text_no","assets/text_no.png"),this.game.load.spritesheet("clone","assets/clone.png",110,168),this.game.load.atlas("boom","assets/boom.png","assets/boom.json",Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),this.game.load.image("text_go","assets/text_go.png"),this.game.load.image("text_ready","assets/text_ready.png")}},{key:"onLoadComplete",value:function(){this.game.state.start("setup")}}]),t}(Phaser.State);i.default=s},{}],15:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"create",value:function(){this.game.modal=new gameModal(this.game),this.createModals(),this.initialCloneCount=5,this.game.septikon.setup();for(var e in this.game.septikon.tileArray)for(var t in this.game.septikon.tileArray[e])this.game.septikon.tileArray[e][t].events.onInputDown.add(this.placeClone,this);game.client.askNewPlayer()}},{key:"placeClone",value:function(e){if(1==e.tileOccupied)return void this.game.septikon.localTeam.killClone({x:e.tileX,y:e.tileY});this.game.septikon.localTeam.personnel.length<this.initialCloneCount&&("surface"==this.game.septikon.tileArray[e.tileX][e.tileY].tileType?this.game.septikon.localTeam.addClone(e.tileX,e.tileY,{isGunner:!0}):this.game.septikon.localTeam.addClone(e.tileX,e.tileY),this.game.septikon.localTeam.personnel.length==this.initialCloneCount&&this.game.modal.showModal("askStart"))}},{key:"createModals",value:function(){this.game.modal.createModal({type:"askStart",includeBackground:!0,modalCloseOnInput:!0,itemsArr:[{type:"graphics",graphicColor:"0xffffff",graphicWidth:300,graphicHeight:300,graphicRadius:40},{type:"text",content:"Are you happy with\n that clone layout?",fontFamily:"Luckiest Guy",fontSize:22,color:"0x1e1e1e",offsetY:-50},{type:"image",content:"text_yes",offsetY:100,offsetX:-80,contentScale:.6,callback:function(){this.game.state.start("game")}},{type:"image",content:"text_no",offsetY:100,offsetX:80,contentScale:.6,callback:function(){this.game.modal.hideModal("askStart")}}]})}}]),t}(Phaser.State);i.default=s},{}]},{},[1]);
